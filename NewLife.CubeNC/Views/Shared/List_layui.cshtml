@using NewLife.Web;
@using XCode;
@using NewLife.Cube.Charts;
@using NewLife;
@using XCode.Configuration;
@{
    Layout = NewLife.Cube.Setting.Current.Layout;

    var fact = ViewBag.Factory as IEntityFactory;
    var page = ViewBag.Page as Pager;
    var set = ViewBag.PageSetting as PageSetting;

    var charts = ViewBag.Charts as ECharts[];
    var charts2 = ViewBag.Charts2 as ECharts[];

    var fields = ViewBag.Fields as FieldCollection;
    var ukey = fact.Unique;
}

@section css{
    <style>
        .layui-fluid {
            padding: 10px;
        }
    </style>
}


@if (set.EnableToolbar)
{
    @await Html.PartialAsync("_List_Toolbar_layui")
}
@*@if (charts != null && charts.Length > 0)
    {
        <div class="clearfix">
            @foreach (var item in charts)
            {
                @await Html.PartialAsync("_ECharts_layui", item)
            }
        </div>
    }*@

@await Html.PartialAsync("_List_Data_layui")

@*<div class="panel-footer">
        @await Html.PartialAsync("_List_Pager_layui")
    </div>*@
@*@if (charts2 != null && charts2.Length > 0)
    {
        <div class="clearfix">
            @foreach (var item in charts2)
            {
                @await Html.PartialAsync("_ECharts_layui", item)
            }
        </div>
    }*@

@section scripts{
    <script>
        layui.use('table', function () {
            var table = layui.table
            $ = layui.$;

            table.init('parse-table-demo', { //转化静态表格
                page: true,
                limit: 20,
                limits: [20, 50, 100],
                size: "sm",
                even: true,
                toolbar: "#toolbarDemo"
            });
        });
    </script>
}